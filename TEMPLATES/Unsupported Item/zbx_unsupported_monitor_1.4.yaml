zabbix_export:
  version: '7.0'
  template_groups:
    - uuid: 7df96b18c230490a9a0a9e2307226338
      name: Templates
  templates:
    - uuid: 6a2f2a5c4f2e4c7db4b0d5b7e1c9a8f1
      template: 'Zabbix Unsupported Monitoring'
      name: 'Zabbix Unsupported Monitoring'
      vendor:
        name: N1k0droid
        version: 1.0.4
      groups:
        - name: Templates
      items:
        - uuid: a1b2c3d44e5f4a7b8c9d0e1f2a3b4c5d
          name: 'Unsupported items (1h) - count'
          type: TRAP
          key: 'zabbix.unsupported.step1[count]'
          delay: '0'
          history: 90d
          triggers:
            - uuid: c3d4e5f650714a7b8a9b0c1d2e3f4051
              expression: 'change(/Zabbix Unsupported Monitoring/zabbix.unsupported.step1[count])>0'
              name: 'New unsupported items detected (1h count increased)'
              opdata: 'count={ITEM.LASTVALUE1}'
              priority: INFO
              tags:
                - tag: scope
                  value: unsupported
                - tag: window
                  value: 1h
            - uuid: b2c3d4e54f604a7b9c8d7e6f5a4b3c2d
              expression: 'last(/Zabbix Unsupported Monitoring/zabbix.unsupported.step1[count])>={$UNSUP_1}'
              name: 'Unsupported items present (1h)'
              opdata: 'count={ITEM.LASTVALUE1}'
              priority: INFO
              tags:
                - tag: scope
                  value: unsupported
                - tag: window
                  value: 1h
            - uuid: d4e5f60751824a7b9b8a7c6d5e4f3021
              expression: 'nodata(/Zabbix Unsupported Monitoring/zabbix.unsupported.step1[count],{$UNSUP_NODATA})=1'
              name: 'Unsupported monitor not updating (possible script/sender issue)'
              opdata: 'nodata={$UNSUP_NODATA}'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: unsupported
                - tag: type
                  value: nodata
        - uuid: 293a4b5c56d74a7b9c8d7e6f5a4b3c2d
          name: 'Unsupported items (1h) - log'
          type: TRAP
          key: 'zabbix.unsupported.step1[log]'
          delay: '0'
          history: 7d
          value_type: TEXT
          trends: '0'
        - uuid: e5f6071852934a7b8c7d6e5f4a3b2c1d
          name: 'Unsupported items (24h) - count'
          type: TRAP
          key: 'zabbix.unsupported.step2[count]'
          delay: '0'
          history: 90d
          triggers:
            - uuid: dbaae8f1efeb49c587b25746616cf87d
              expression: 'change(/Zabbix Unsupported Monitoring/zabbix.unsupported.step2[count])>0'
              name: 'New unsupported items detected (24h count increased)'
              opdata: 'count={ITEM.LASTVALUE1}'
              priority: INFO
              tags:
                - tag: scope
                  value: unsupported
                - tag: window
                  value: 24h
            - uuid: f607182953a44a7b8a9b0c1d2e3f4051
              expression: 'last(/Zabbix Unsupported Monitoring/zabbix.unsupported.step2[count])>={$UNSUP_2}'
              name: 'Unsupported items persistent (> 24h)'
              opdata: 'count={ITEM.LASTVALUE1}'
              priority: AVERAGE
              dependencies:
                - name: 'Unsupported items present (1h)'
                  expression: 'last(/Zabbix Unsupported Monitoring/zabbix.unsupported.step1[count])>={$UNSUP_1}'
              tags:
                - tag: scope
                  value: unsupported
                - tag: window
                  value: 24h
        - uuid: 3a4b5c6d57e84a7b8a9b0c1d2e3f4051
          name: 'Unsupported items (24h) - log'
          type: TRAP
          key: 'zabbix.unsupported.step2[log]'
          delay: '0'
          history: 7d
          value_type: TEXT
          trends: '0'
        - uuid: 0718293a54b54a7b9c8d7e6f5a4b3c2d
          name: 'Unsupported items (7d) - count'
          type: TRAP
          key: 'zabbix.unsupported.step3[count]'
          delay: '0'
          history: 90d
          triggers:
            - uuid: f3f85b5a4b3b479180bc9737a3f9b4a1
              expression: 'change(/Zabbix Unsupported Monitoring/zabbix.unsupported.step3[count])>0'
              name: 'New unsupported items detected (7d count increased)'
              opdata: 'count={ITEM.LASTVALUE1}'
              priority: INFO
              tags:
                - tag: scope
                  value: unsupported
                - tag: window
                  value: 7d
            - uuid: 18293a4b55c64a7b8a9b0c1d2e3f4051
              expression: 'last(/Zabbix Unsupported Monitoring/zabbix.unsupported.step3[count])>={$UNSUP_3}'
              name: 'Unsupported items persistent (> 7 days)'
              opdata: 'count={ITEM.LASTVALUE1}'
              priority: HIGH
              dependencies:
                - name: 'Unsupported items persistent (> 24h)'
                  expression: 'last(/Zabbix Unsupported Monitoring/zabbix.unsupported.step2[count])>={$UNSUP_2}'
              tags:
                - tag: scope
                  value: unsupported
                - tag: window
                  value: 7d
        - uuid: 4b5c6d7e58f94a7b9c8d7e6f5a4b3c2d
          name: 'Unsupported items (7d) - log'
          type: TRAP
          key: 'zabbix.unsupported.step3[log]'
          delay: '0'
          history: 7d
          value_type: TEXT
          trends: '0'
      macros:
        - macro: '{$UNSUP_1}'
          value: '1'
        - macro: '{$UNSUP_2}'
          value: '1'
        - macro: '{$UNSUP_3}'
          value: '1'
        - macro: '{$UNSUP_NODATA}'
          value: 10m
